ingress-nginx:
  controller:
    replicaCount: 2
    config:
      client-body-buffer-size: 100M
      client-body-timeout: 120
      client-header-timeout: 120
      enable-brotli: "true"
      enable-real-ip: "true"
      hsts-max-age: 31449600
      keep-alive-requests: 10000
      keep-alive: 120
      proxy-body-size: 0
      proxy-buffer-size: 16k
    use-forwarded-headers: "true"
    service:
      loadBalancerIP: 192.168.100.150
      externalTrafficPolicy: Local
#    ingressClassResource:
#      default: true
    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
        namespace: kube-system
      prometheusRule:
        enabled: false
    tolerations:
      - key: "arm"
        operator: "Exists"
      - key: "arm64"
        operator: "Exists"
    extraArgs:
      default-ssl-certificate: "cert-manager/acme-crt-secret"

    topologySpreadConstraints:
      - maxSkew: 1
        topologyKey: kubernetes.io/hostname
        whenUnsatisfiable: DoNotSchedule
        labelSelector:
          matchLabels:
            app.kubernetes.io/name: ingress-nginx
            app.kubernetes.io/component: controller

    resources:
      requests:
        memory: 500Mi
        cpu: 25m
      limits:
        memory: 600Mi
  defaultBackend:
    enabled: true
    image:
      repository: ghcr.io/tarampampam/error-pages
      tag: 2.24.0
    extraEnvs:
      - { name: TEMPLATE_NAME, value: orient }
      - { name: SHOW_DETAILS, value: "false" }
    resources:
      requests:
        memory: 250Mi
        cpu: 25m
      limits:
        memory: 350Mi
