oauth2-proxy:
  image:
    registry: "quay.io"
    repository: "oauth2-proxy/oauth2-proxy"
    tag: "v7.12.0"
  replicaCount: 2

  # Disable built-in ingress - we'll use HTTPRoute
  ingress:
    enabled: false

  extraArgs:
    provider: oidc
    oidc-issuer-url: "https://rogerrum.us.auth0.com/"
    skip-provider-button:
    pass-authorization-header:
    email-domain: "*"
    cookie-domain: ".rsr.net"
    whitelist-domain: ".rsr.net"
    # Important: Use auth.rsr.net for OAuth callback instead of individual app domains
    redirect-url: "https://auth.rsr.net/oauth2/callback"
    # Important: Enable headers for ExtAuth
    set-xauthrequest:
    pass-access-token:
    pass-user-headers:

  affinity:
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - oauth2-proxy
          topologyKey: "kubernetes.io/hostname"

  config:
    existingSecret: oauth2-proxy-secret
